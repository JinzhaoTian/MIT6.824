# ZooKeeper

> 来源：https://pdos.csail.mit.edu/6.824/schedule.html  
> LEC 8：ZooKeeper  
> Preparation：《ZooKeeper: Wait-free coordination for Internet-scale systems》

# 一. 概述

> ZooKeeper直译过来就是“动物园管理者”的意思。ZooKeeper起源于雅虎研究院的一个研究小组，在立项之初，考虑到之前内部很多项目都是使用动物的名字来命名的（例如著名的Pig项目），雅虎的工程师希望这个项目也取一个动物的名字。时任研究院的首席科学家Raghu Ramakrishnan开玩笑说：“这样下去，我们这都要变成动物园了！”此话一出，大家纷纷表示就叫动物园管理员吧---因为各个以动物命名的分布式组件放在一起，雅虎的整个分布式系统看上去就像一个大型动物园，而ZooKeeper正好要用来进行分布式环境的协调---于是，ZooKeeper的名字也就由此诞生了。

ZooKeeper是一个开源的分布式**协调**服务。ZooKeeper的设计目标是将那些复杂且容易出错的分布式一致性服务封装起来，构成一个高效可靠的原语集，并以一系列简单易用的接口提供给用户使用，相比于其他分布式锁服务（如Chubby），ZooKeeper给用户的自由度更高。

在后续发展中，Apache ZooKeeper成为Hadoop等分布式框架所使用的有组织服务的标准。下图来源于易大师7.7组会分享内容（Massive data processing related topics）：

![](pic/4.png)

ZooKeeper是一个典型的分布式数据一致性解决方案，分布式应用   程序可以基于ZooKeeper实现诸如数据发布/订阅、负载均衡、命名服务、分布式协调/通知、集群管理、Master选举、分布式锁和分布式队列等功能。

# 二. 基本原理

实现ZooKeeper的分布式系统，会在初始化的时候进行Leader选举，Leader

# 及实现




# 三. 技术难点

## 如何选Leader

## 如何保证数据一致

zookeeper没有完全线性一致化的保证，但是也有两个保证。

zookeeper只能保证自己写进去的最新的东西一定能看到，但是不保证别人写进去的最新的东西一定能被看到。

可以用sync操作来保证自己看到的是最新的。sync操作类似于一个写操作，在上面两个保证之下，就能确保我之后的读操作是读到的最新的

# 四. 解决的问题

## 数据发布/订阅

## 配置文件统一管理

在分布式集群的工程中,通常由很多服务部署在不同的服务上,每个服务都有自己的配置信息,如果需要修改某个配置,则可能需要对多态服务器进行配置的修改,是非常不方便的。那么就可以使用zookeeper帮助我们进行统一的配置文件管理。

## 集群管理

## 分布式锁
